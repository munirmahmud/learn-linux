# Class 21: RPM

`rpm` দিয়ে আমরা সফটওয়্যার ইন্সটল করতে পারি কিন্তু যদি ঐ সফটওয়্যারে কোন ডিপেন্ডেন্সি থাকে তাহলে সে ঐ ডিপেন্ডেন্সি ইন্সটল করতে পারে না। এক্ষেত্রে ম্যানুয়ালি ডিপেন্ডেন্সিগুলো আগে ইন্সটল করেতে হয় তারপরে মেইন সফটয়্যারটি ইন্সটল করতে হয়। `rpm` কোন সমস্যা ছাড়া সেই সফটওয়্যারগুলো ইন্সটল করতে পারে যেগুলোর কোন ডিপেন্ডেন্সি নাই।

এই কারনেই আমরা ম্যানুয়াল প্রসেসে (rpm) না গিয়ে `yum or dnf` কমান্ড ব্যাবহার করি।

### How yum works

যখন `dnf or yum` কমান্ড রান করা হয় তখন সে সিস্টেমে `Repository file` খুঁজে এবং ঐ ফাইলে বিভিন্ন সফটওয়্যার প্যাকেজের ইনফরমেশন এবং সোর্স অর্থাৎ ঐ সফটওয়্যারটি কোথায় রাখা আছে তা দেয়া থাকে সেখান থেকেই ইন্টারনেটের মাধ্যমে ইন্সটল হয়।

Repository বলতে আমরা কি বুঝি?

Repository is a central location in which data is stored and managed. [Learn more about Repository](https://www.youtube.com/watch?v=9A26ybw6tGY)

`/etc/yum.repos.d/` এই ডিরেক্টরিতে বিভিন্ন সফটওয়্যারের তথ্য দেয়া আছে। `dnf or yum` কমান্ড রান করলে এই ফাইল থেকে তথ্য নিয়ে আমাদের সিস্টেমে সফটওয়্যারটি ইন্সটল হয়।

কাস্টম রিপজিটরি তৈরি করতে গেলে আমাদের এই ডিরেক্টরির ভিতরে যেকোনো নামে একটা ফাইল তৈরি করতে হবে এবং ফাইলের এক্সটেনশন অবশ্যই `repo` হতে হবে। যেমনঃ `my-local.repo`

আমরা চাইলে একই ফাইলে একাধিক রিপজিটরি অ্যাড করতে পারি আবার প্রতিটা রিপজিটরির জন্য আলাদা আলাদা ফাইলও তৈরি করতে পারি। এখানে প্রয়োজন অনুযায়ী সিদ্ধান্ত নিতে হবে।

`iso or dvd` মাউন্ট করার পরে সেখান থেকে আমরা আমাদের প্যাকেজ / সফটওয়্যার গুলো কপি করে আমাদের সিস্টেমে রাখবো।

আমি আমার `iso` ফাইলকে `/media` ডিরেক্টরিতে মাউন্ট করে নিয়েছি। কিভাবে মাউন্ট করতে হয় তা ২০ তম ক্লাসে বিস্তারিত আছে।

`cd /media/AppStream/Packages/`

`cp -rfv */*.rpm /Software/Packages/`

`cd /media/BaseOS/Packages/`

`cp -rfv */*.rpm /Software/Packages/`

আমরা `AppStream & BasesOS` ডিরেক্টরি থেকে সকল সফটওয়্যার আমাদের সিস্টেমে `/Software/Packages/` ডিরেক্টরিতে কপি করে নিয়ে আসলাম। এখন একটা রিপজিটরি ফাইলে তৈরি করবো এই ডিরেক্টরিতে `/etc/yum.repos.d/`

`vim custom.rpm`

```bash
[custom_id]
name="Red Hat ISO Packages"
baseurl=file:///Software/Packages/
gpgcheck=false
enabled=true
```

`gpgcheck for GNU Privacy Guard Check`

আমরা এই ৪ মাধ্যম কে `baseurl` এ অ্যাড করতে পারি।

`baseurl=file:///Software/Packages/`

`baseurl=http://8.8.8.8/app/software`

`baseurl=https://8.8.8.8/app/software`

`baseurl=ftp://8.8.8.8/app/software`

`gpgcheck=false` এখানে `gpgcheck` এর ভ্যালু হিসেবে `true/1` অথবা `false/0` ইউজ করতে পারি।

`enabled=false` এখানে `enabled` এর ভ্যালু হিসেবে `true/1` অথবা `false/0` ইউজ করতে পারি। `true/1` থাকলে সে ঐ রিপজিটরি চেক করে যদি সফটওয়্যারটি থাকে সেক্ষেত্রে ইন্সটল করবে আর যদি `false/0` থাকে তাহলে সে আর ঐ রিপজিটরি চেক করবে না এবং সফটওয়্যারটি ইন্সটলও হবে না।

`yum clean all` কোন cache থাকলে তা রিমুভ করে দিবে।

`yum repolist` আমার সিস্টেমে যতগুলো রিপজিটরি ফাইল আছে তার লিস্ট দেখাবে।

`yum repolist all` আমার সিস্টেমে কতোগুলো রিপজিটরি enable/disable আছে তার লিস্ট দেখাবে।

এখন `yum install httpd` কমান্ড রান করি তাহলে সে `Software/Packages/` এই ডিরেক্টরিতে এসে একটা ডাটাবেইজ খুজবে যেই ডাটাবেইজে আমাদের সকল রিপজিটরি লিস্টগুলো থাকবে। ডাটাবেইজের নাম হবে `repodata`

`createrepo_c` সফটওয়্যার দিয়ে আমরা রিপজিটরি ডাটাবেইজ তৈরি করি। প্রথমে চেক করে নেই এই সফটওয়্যারটি আমাদের সিস্টেমে আছে কিনা যদি না থাকে তাহলে ইন্সটল করে নিতে হবে।

`rpm -qa createrepo_c` createrepo_c সফটওয়্যারটি আমাদের সিস্টেমে ইন্সটল করা আছে কিনা তা চেক করে দেখার জন্য।

`rpm -ivh createrepo_c` এই কমান্ড দিয়ে আমরা createrepo_c সফটওয়্যারটি আমাদের সিস্টেমে ইন্সটল করতে পারি।

নোটঃ সিস্টেমে আমাদের রিপোজিটরি অর্থাৎ কাস্টম রিপোজিটরি ছাডা অন্য কোন রিপো যদি না থাকে, তাহলে নির্দিষ্ট লিনাক্স ডিস্ট্র এর থেকে RPM ফাইলগুলো নিতে হবে অথবা DVD or Pendrive থেকে নিয়ে আমাদের সিস্টেমে রাখতে হবে। এবং ঐ ডিরেক্টরিতে গিয়ে `rpm -ivh createrepo_c` কমান্ডটি রান করতে হবে।

এর কিছু ডিপেন্ডেন্সি আছে সিস্টেম আরকিটেকচার অনুযায়ী ডিপেন্ডেন্সিগুল ইন্সটল করে তারপরে মেইন সফটওয়্যারটি ইন্সটল করতে হবে।

`createrepo -d /Software/` repodata নামক ডাটাবেইজ তৈরি করার জন্য।

`-d for Database`

<!-- 31:00 -->
